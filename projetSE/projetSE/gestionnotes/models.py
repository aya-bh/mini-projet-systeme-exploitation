from django.contrib.auth.models import User,Group
from django.db import models

class Personne(User):
    cin = models.CharField(unique=True, max_length=8)
    class Meta:
        abstract = True

class Admin(Personne):
   pass

class Enseignant(Personne):
    departement = models.CharField(max_length=100)

class Module(models.Model):
    designation = models.CharField(max_length=50)

class Element(models.Model):
    designation = models.CharField(max_length=100)
    coefficientelement = models.FloatField()
    coefficientcontrole = models.FloatField()
    coefficienttp = models.FloatField()
    coefficientexam = models.FloatField()
    module = models.ForeignKey(Module, on_delete=models.CASCADE)

class Etudiant(Personne):
    pass

class Semestre(models.Model):
    designation = models.CharField(max_length=50)

class Filiere(models.Model):
    designation = models.CharField(max_length=50)

class Avoir(models.Model):
    module = models.ForeignKey(Module, on_delete=models.CASCADE, primary_key=True)
    filiere = models.ForeignKey(Filiere, on_delete=models.CASCADE)

    class Meta:
        unique_together = (('module', 'filiere'),)

class Cycle(models.Model):
    designation = models.CharField(max_length=50)
    filiere = models.ForeignKey(Filiere, on_delete=models.CASCADE)


class Enseigne(models.Model):
    cours = models.IntegerField()
    tp = models.IntegerField()
    annee = models.TextField()  # This field type is a guess.
    enseignant = models.ForeignKey(Enseignant, on_delete=models.CASCADE)
    element = models.ForeignKey(Element, on_delete=models.CASCADE)


class Enseignedans(models.Model):
    module = models.OneToOneField(Module, on_delete=models.CASCADE, primary_key=True)
    semestre = models.ForeignKey(Semestre, on_delete=models.CASCADE)

    class Meta:
        unique_together = (('module', 'semestre'),)

class Notes(models.Model):
    controle = models.FloatField()
    tp = models.FloatField()
    examen = models.FloatField()
    annee = models.TextField()  # This field type is a guess.
    element = models.ForeignKey(Element, on_delete=models.CASCADE)
    etudiant = models.ForeignKey(Etudiant, on_delete=models.CASCADE)

class Inscription(models.Model):
    promotion = models.CharField(max_length=100)
    etudiant = models.ForeignKey(Etudiant, on_delete=models.CASCADE)
    filiere = models.ForeignKey(Filiere, on_delete=models.CASCADE)



